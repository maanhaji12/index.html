<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø³Ø¹Ø±Ø§Øª ÙˆØ§Ù„Ø¨Ø±ÙˆØªÙŠÙ†</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #23384a;
      color: white;
      direction: rtl;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #ff4d4d;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 5px;
      border: none;
    }
    button {
      margin-top: 20px;
      width: 100%;
      background-color: #ff4d4d;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    .results {
      margin-top: 20px;
      padding: 15px;
      background-color: #2d4a5f;
      border-radius: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #ffffff44;
    }
    th, td {
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #ff4d4d;
    }
  </style>
</head>
<body>

  <h1>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø³Ø¹Ø±Ø§Øª ÙˆØ§Ù„Ø¨Ø±ÙˆØªÙŠÙ†</h1>

  <label for="gender">Ø§Ù„Ø¬Ù†Ø³:</label>
  <select id="gender">
    <option value="male">Ø°ÙƒØ±</option>
    <option value="female">Ø£Ù†Ø«Ù‰</option>
  </select>

  <label for="age">Ø§Ù„Ø¹Ù…Ø± (Ø¨Ø§Ù„Ø³Ù†ÙˆØ§Øª):</label>
  <input type="number" id="age">

  <label for="weight">Ø§Ù„ÙˆØ²Ù† (ÙƒØº):</label>
  <input type="number" id="weight">

  <label for="height">Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…):</label>
  <input type="number" id="height">

  <label for="activity">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø´Ø§Ø·:</label>
  <select id="activity">
    <option value="1.2">Ù‚Ù„ÙŠÙ„ Ø£Ùˆ Ø¨Ø¯ÙˆÙ† Ù†Ø´Ø§Ø·</option>
    <option value="1.375">Ù†Ø´Ø§Ø· Ø®ÙÙŠÙ (1-3 Ø£ÙŠØ§Ù…/Ø£Ø³Ø¨ÙˆØ¹)</option>
    <option value="1.55">Ù†Ø´Ø§Ø· Ù…ØªÙˆØ³Ø· (3-5 Ø£ÙŠØ§Ù…/Ø£Ø³Ø¨ÙˆØ¹)</option>
    <option value="1.725">Ù†Ø´Ø§Ø· Ø¹Ø§Ù„ÙŠ (6-7 Ø£ÙŠØ§Ù…/Ø£Ø³Ø¨ÙˆØ¹)</option>
    <option value="1.9">Ù†Ø´Ø§Ø· Ø±ÙŠØ§Ø¶ÙŠ Ù…ÙƒØ«Ù</option>
  </select>

  <button onclick="calculate()">Ø§Ø­Ø³Ø¨</button>
  <button onclick="downloadPDF()">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙƒÙ…Ù„Ù PDF</button>

  <div class="results" id="results" style="display: none;"></div>

  <script>
    function generateMonthPlan(mealPlan) {
      let table = '<h3>ğŸ“… Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø£ÙƒÙ„ Ù„Ù…Ø¯Ø© Ø´Ù‡Ø±:</h3>';
      table += '<table><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„ÙØ·ÙˆØ±</th><th>Ø³Ù†Ø§Ùƒ 1</th><th>Ø§Ù„ØºØ¯Ø§Ø¡</th><th>Ø³Ù†Ø§Ùƒ 2</th><th>Ø§Ù„Ø¹Ø´Ø§Ø¡</th></tr>';
      for (let i = 1; i <= 30; i++) {
        table += `<tr><td>Ø§Ù„ÙŠÙˆÙ… ${i}</td><td>${mealPlan.breakfast}</td><td>${mealPlan.snack1}</td><td>${mealPlan.lunch}</td><td>${mealPlan.snack2}</td><td>${mealPlan.dinner}</td></tr>`;
      }
      table += '</table>';
      return table;
    }

    function calculate() {
      const gender = document.getElementById("gender").value;
      const age = parseInt(document.getElementById("age").value);
      const weight = parseFloat(document.getElementById("weight").value);
      const height = parseFloat(document.getElementById("height").value);
      const activity = parseFloat(document.getElementById("activity").value);

      if (!age || !weight || !height) {
        alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
        return;
      }

      let bmr;
      if (gender === "male") {
        bmr = 10 * weight + 6.25 * height - 5 * age + 5;
      } else {
        bmr = 10 * weight + 6.25 * height - 5 * age - 161;
      }

      const calories = bmr * activity;
      const protein = weight * 1.6;

      const bmi = weight / Math.pow(height / 100, 2);
      const idealWeight = 22 * Math.pow(height / 100, 2);
      const weightDiff = idealWeight - weight;
      let weeksNeeded = Math.abs(weightDiff) / 0.5;

      let recommendation = "";
      let plan = "";
      let mealPlan = {};

      if (bmi < 18.5) {
        recommendation = `âœ… ÙˆØ²Ù†Ùƒ Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ. Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ù‡Ùˆ ${idealWeight.toFixed(1)} ÙƒØº. ØªØ­ØªØ§Ø¬ Ù„Ø²ÙŠØ§Ø¯Ø© ${(weightDiff).toFixed(1)} ÙƒØº Ø®Ù„Ø§Ù„ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ ${Math.ceil(weeksNeeded)} Ø£Ø³Ø¨ÙˆØ¹.`;
        plan = `ğŸ½ï¸ Ù†Ø¸Ø§Ù… Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù†:<ul><li>ØªÙ†Ø§ÙˆÙ„ ${Math.round(calories + 300)} Ø³Ø¹Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§</li><li>Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†: ${(weight * 1.8).toFixed(1)} ØºØ±Ø§Ù… ÙŠÙˆÙ…ÙŠÙ‹Ø§</li><li>Ù‚Ø³Ù… Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø¥Ù„Ù‰ 5 ÙŠÙˆÙ…ÙŠÙ‹Ø§ØŒ Ø£Ø¶Ù Ø§Ù„Ù…ÙƒØ³Ø±Ø§Øª ÙˆØ§Ù„Ø­Ù„ÙŠØ¨ Ø§Ù„ÙƒØ§Ù…Ù„ Ø§Ù„Ø¯Ø³Ù…</li></ul>`;
        mealPlan = {
          breakfast: 'Ø¨ÙŠØ¶ØªØ§Ù† + Ø®Ø¨Ø² + Ø¬Ø¨Ù†Ø© + Ø­Ù„ÙŠØ¨ ÙƒØ§Ù…Ù„',
          snack1: 'ØªÙ…Ø± + Ø²Ø¨Ø¯Ø© ÙÙˆÙ„ Ø³ÙˆØ¯Ø§Ù†ÙŠ',
          lunch: 'Ø¯Ø¬Ø§Ø¬ Ø£Ùˆ Ù„Ø­Ù… + Ø£Ø±Ø² + Ø³Ù„Ø·Ø©',
          snack2: 'Ù…ÙƒØ³Ø±Ø§Øª + Ù…ÙˆØ²Ø©',
          dinner: 'Ø¨Ø·Ø§Ø·Ø§ + ØªÙˆÙ†Ø© + Ø®Ø¶Ø§Ø± Ù…Ø´ÙˆÙŠØ©'
        };
      } else if (bmi >= 25) {
        recommendation = `âš ï¸ ÙˆØ²Ù†Ùƒ Ø²Ø§Ø¦Ø¯. Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ù‡Ùˆ ${idealWeight.toFixed(1)} ÙƒØº. ØªØ­ØªØ§Ø¬ Ù„Ø¥Ù†Ù‚Ø§Øµ ${(Math.abs(weightDiff)).toFixed(1)} ÙƒØº Ø®Ù„Ø§Ù„ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ ${Math.ceil(weeksNeeded)} Ø£Ø³Ø¨ÙˆØ¹.`;
        plan = `ğŸ Ù†Ø¸Ø§Ù… Ø¥Ù†Ù‚Ø§Øµ Ø§Ù„ÙˆØ²Ù†:<ul><li>ØªÙ†Ø§ÙˆÙ„ ${Math.round(calories - 500)} Ø³Ø¹Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§</li><li>Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù: ${(weight * 2).toFixed(1)} ØºØ±Ø§Ù… ÙŠÙˆÙ…ÙŠÙ‹Ø§</li><li>Ù‚Ù„Ù„ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª ÙˆØ§Ù„Ø³ÙƒØ±ÙŠØ§ØªØŒ Ù…Ø§Ø±Ø³ Ø§Ù„Ø±ÙŠØ§Ø¶Ø© 4-5 Ù…Ø±Ø§Øª Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ‹Ø§</li></ul>`;
        mealPlan = {
          breakfast: 'Ø´ÙˆÙØ§Ù† + Ù…ÙˆØ²Ø© + Ø­Ù„ÙŠØ¨ Ù‚Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø³Ù…',
          snack1: 'Ø®ÙŠØ§Ø± + Ù„ÙˆØ²',
          lunch: 'ØµØ¯Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ + Ø£Ø±Ø² Ø¨Ù†ÙŠ + Ø®Ø¶Ø§Ø±',
          snack2: 'Ø²Ø¨Ø§Ø¯ÙŠ ÙŠÙˆÙ†Ø§Ù†ÙŠ',
          dinner: 'Ø´ÙˆØ±Ø¨Ø© Ø¹Ø¯Ø³ + Ø³Ù„Ø·Ø©'
        };
      } else {
        recommendation = `âœ… ÙˆØ²Ù†Ùƒ Ù…Ø«Ø§Ù„ÙŠ. Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ ØªÙ†Ø§ÙˆÙ„ ${Math.round(calories)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ© Ùˆ${protein.toFixed(1)} ØºØ±Ø§Ù… Ø¨Ø±ÙˆØªÙŠÙ†.`;
        plan = `<ul><li>Ù†Ø¸Ø§Ù…Ùƒ Ø¬ÙŠØ¯! Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø±ÙˆØªÙŠÙ† ÙˆØ±Ø§Ù‚Ø¨ ÙˆØ²Ù†Ùƒ Ø´Ù‡Ø±ÙŠÙ‹Ø§.</li></ul>`;
        mealPlan = {
          breakfast: 'Ø¨ÙŠØ¶ØªÙŠÙ† + Ø®Ø¶Ø§Ø± + Ø®Ø¨Ø² Ø£Ø³Ù…Ø±',
          snack1: 'ØªÙØ§Ø­Ø© + Ø­ÙÙ†Ø© Ù…ÙƒØ³Ø±Ø§Øª',
          lunch: 'Ø³Ù…Ùƒ Ù…Ø´ÙˆÙŠ + Ø¨Ø·Ø§Ø·Ø§ + Ø³Ù„Ø·Ø©',
          snack2: 'Ù„Ø¨Ù† + ØªÙ…Ø±ØªÙŠÙ†',
          dinner: 'ÙÙˆÙ„ + Ø·Ù…Ø§Ø·Ù… + Ø²ÙŠØª Ø²ÙŠØªÙˆÙ†'
        };
      }

      const monthPlan = generateMonthPlan(mealPlan);

      document.getElementById("results").style.display = "block";
      document.getElementById("results").innerHTML =
        `<p>ğŸ”¥ Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: <strong>${Math.round(calories)} Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ©</strong></p>
         <p>ğŸ’ª ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠØ©: <strong>${protein.toFixed(1)} ØºØ±Ø§Ù…</strong></p>
         <p>ğŸ“Š Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ: <strong>${idealWeight.toFixed(1)} ÙƒØº</strong></p>
         <p>ğŸ“‹ Ø§Ù„ØªÙˆØµÙŠØ©: ${recommendation}</p>
         <p>${plan}</p>
         ${monthPlan}`;
    }

    function downloadPDF() {
      const element = document.getElementById("results");
      html2canvas(element, { scale: 2 }).then(canvas => {
        const imgData = canvas.toDataURL("image/png");
        const pdf = new jspdf.jsPDF("p", "mm", "a4");
        const pageHeight = pdf.internal.pageSize.height;
        let imgHeight = (canvas.height * 210) / canvas.width;
        let heightLeft = imgHeight;
        let position = 0;

        pdf.addImage(imgData, "PNG", 0, position, 210, imgHeight);
        heightLeft -= pageHeight;

        while (heightLeft > 0) {
          position = heightLeft - imgHeight;
          pdf.addPage();
          pdf.addImage(imgData, "PNG", 0, position, 210, imgHeight);
          heightLeft -= pageHeight;
        }

        pdf.save("Ø¨Ø±Ù†Ø§Ù…Ø¬-ØºØ°Ø§Ø¦ÙŠ-Ø´Ù‡Ø±ÙŠ.pdf");
      });
    }
  </script>

</body>
</html>
